# Nome do Workflow que aparecerá no GitHub
name: Verificação de Sintaxe PHP

# Gatilho: Roda em cada 'push' e 'pull_request' para qualquer branch
on: [push, pull_request]

jobs:
  # Nome do Job
  php-lint-job:
    name: Rodar Verificador de Sintaxe (Lint)
    # Máquina virtual que será usada
    runs-on: ubuntu-latest

    steps:
      # Passo 1: Clona o código do seu repositório para a máquina virtual
      - name: Checkout do código
        uses: actions/checkout@v4

      # Passo 2: Instala e configura a versão correta do PHP
      - name: Configurar PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: '8.0' # Use a mesma versão do seu ambiente XAMPP

      # Passo 3: Roda o verificador de sintaxe nativo do PHP em todos os arquivos .php
      # O comando 'find' localiza todos os arquivos que terminam com .php
      # e o 'xargs' executa 'php -l' para cada um deles.
      # Se qualquer arquivo tiver um erro, o comando falha, o que faz o workflow falhar.
      - name: Rodar PHP Lint
        run: find . -type f -name "*.php" -print0 | xargs -0 -n1 php -l